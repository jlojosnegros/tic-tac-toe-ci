node 
{
    stage ('Checkout')
    {
        git url: 'http://172.18.0.6:8080/tic-tac-toe'
    }
    stage ('Build and test') 
    {
        docker.image('maven').inside('-v $PWD:$PWD -w $PWD -p 12345:8080 -v $HOME/.m2:/root/.m2 ' + '-v /var/run/docker.sock:/var/run/docker.sock') 
        {
            sh 'mvn -Dtest=SeleniumSytemTest test'
        }
        step([$class: 'JUnitResultArchiver',
        testResults: '**/target/surefire-reports/TEST-*.xml'])
    }
}
